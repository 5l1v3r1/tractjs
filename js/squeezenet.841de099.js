(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["squeezenet"],{"3b1b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column"},[n("h1",{staticClass:"headline"},[t._v("SqueezeNet Inference")]),n("div",{staticClass:"d-flex justify-center flex-wrap"},[n("div",{staticClass:"ma-4 d-flex flex-column justify-space-around",style:{width:t.width+"px"}},[n("v-select",{ref:"select",staticClass:"pa-0 shrink",attrs:{"hide-details":"",label:"Select image",items:t.items,"prepend-icon":"mdi-image"},on:{change:t.select}}),n("p",{staticClass:"mx-0 ma-4 mb-2 overline align-self-center"},[t._v("- or -")]),n("v-file-input",{ref:"upload",staticClass:"pa-0 shrink",attrs:{"hide-details":"",label:"Upload image"},on:{change:t.upload}})],1),n("v-card",{staticClass:"mx-2",attrs:{height:t.height}},[n("canvas",{ref:"canvas",attrs:{height:t.height,width:t.width}})])],1),n("v-btn",{staticClass:"ma-8 align-self-center",attrs:{disabled:!t.canRun,color:"primary","x-large":""},on:{click:t.run}},[t._v("Predict")]),t.output?n("v-container",{staticClass:"shrink align-self-center",attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"body-1 font-weight-bold"},[t._v("Inference time:")]),n("v-col",{staticClass:"text-right font-weight-regular"},[t._v(t._s(Math.round(t.output.time))+"ms")])],1),n("v-row",[n("v-col",[n("p",{staticClass:"body-1 font-weight-bold ma-0"},[t._v("Predictions:")])]),n("v-col",{staticClass:"text-right"},[t._v(t._s(t.output.predictions[0].label)+": "+t._s(Math.round(100*t.output.predictions[0].score))+"%")])],1),t._l(t.output.predictions.slice(1),(function(e,a){return n("v-row",{key:a},[n("v-col"),n("v-col",{staticClass:"text-right"},[t._v(t._s(e.label)+": "+t._s(Math.round(100*e.score))+"%")])],1)}))],2):t._e()],1)},r=[],i=(n("4160"),n("a630"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("1276"),n("498a"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),s=(n("96cf"),n("1da1")),c=n("f35a");function u(t){return window.location.href.replace(/\/$/,"")+"/"+t}function l(t,e){var n=new Image;n.src=t,n.onload=function(){var t=e.getContext("2d");t.drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height)}}function o(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height).data,a=[.485,.456,.406],r=[.229,.224,.225],i=n.length/4,s=new Float32Array(3*i),c=0,u=0;u<3;u++)for(var l=0;l<t.height;l++)for(var o=0;o<t.width;o++){var d=n[4*(l*t.width+o)+u];s[c]=(d/255-a[u])/r[u],c++}return[s,[1,3,t.height,t.width]]}function d(t){var e=t.map((function(t){return Math.exp(t)})),n=e.reduce((function(t,e){return t+e}),0);return e.map((function(t){return t/n}))}function f(t,e){var n=Array.from(t).map((function(t,e){return[t,e]}));return n.sort((function(t,e){return e[0]-t[0]})),n.slice(0,e)}var h={name:"SqueezenetDemo",data:function(){return{width:224,height:224,k:5,items:[{text:"Cat",value:u("cat.png")},{text:"Dog",value:u("dog.png")},{text:"Cheetah",value:u("cheetah.png")},{text:"Bird",value:u("bird.png")}],output:null,model:null,labels:[]}},computed:{canRun:function(){return null!==this.model&&this.labels.length>0}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new c["a"](u("squeezenet1_1.onnx"));case 2:return t.model=e.sent,e.next=5,fetch(u("synset.txt"));case 5:if(n=e.sent,!(n.status<200&&n.status>=300)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.text();case 10:a=e.sent,a.split("\n").forEach((function(e){if(0!=e.trim().length){var n=e.split(" ").slice(1).join(" ").split(",")[0];t.labels.push(n)}}));case 12:case"end":return e.stop()}}),e)})))()},methods:{upload:function(t){null!==t&&(l(URL.createObjectURL(t),this.$refs.canvas),this.$refs.select.internalValue=null)},select:function(t){null!==t&&(this.$refs.upload.internalValue=null,l(t,this.$refs.canvas))},predict:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new c["b"](t,e),a.next=3,n.model.predict([r]);case 3:return i=a.sent[0],s=d(i.data),a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},run:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o(t.$refs.canvas),a=Object(i["a"])(n,2),r=a[0],s=a[1],c=performance.now(),e.next=4,t.predict(r,s);case 4:u=e.sent,l=performance.now(),d=f(u,t.k),t.output={time:l-c,predictions:d.map((function(e){var n=Object(i["a"])(e,2),a=n[0],r=n[1];return{label:t.labels[r],score:a}}))};case 8:case"end":return e.stop()}}),e)})))()}}},p=h,v=(n("6e2b"),n("2877")),m=n("6544"),g=n.n(m),b=n("8336"),w=n("b0af"),x=n("62ad"),C=n("a523"),_=n("23a7"),k=n("0fd9"),R=n("b974"),j=Object(v["a"])(p,a,r,!1,null,"5d17f270",null);e["default"]=j.exports;g()(j,{VBtn:b["a"],VCard:w["a"],VCol:x["a"],VContainer:C["a"],VFileInput:_["a"],VRow:k["a"],VSelect:R["a"]})},6366:function(t,e,n){},"6e2b":function(t,e,n){"use strict";var a=n("6366"),r=n.n(a);r.a}}]);
//# sourceMappingURL=squeezenet.841de099.js.map